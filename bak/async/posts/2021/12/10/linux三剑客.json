{"tags":[{"name":"linux","permalink":"https://xuanxiaoming.github.io/tags/linux/","url":"/async/tags/linux.json","count":3}],"categories":[],"url":"/async/posts/2021/12/10/linux三剑客.json","date":1639121378000,"path":{"year":2021,"month":12,"day":10,"name":"linux三剑客"},"title":"linux三剑客","permalink":"https://xuanxiaoming.github.io/2021/12/10/linux%E4%B8%89%E5%89%91%E5%AE%A2/","content":"<h1 id=\"grep\"><a href=\"#grep\" class=\"headerlink\" title=\"grep\"></a>grep</h1><p>grep 命令用于查找文件里符合条件的字符串。</p>\n<p>使用格式 <code>grep [command] &quot;待查文本&quot; &quot;查询地址（支持文件名通配符）&quot;</code></p>\n<p>其中command可以使用 <code>-E</code> 使待查文本支持正则表达式</p>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\"># 例如：\n> grep test *file \n\n# 含义是在当前路径中所有文件名后缀为file的文件中查找‘test’<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>使用 <code>-Eo</code> 可以只输出正则表达式匹配到的子字符串</p>\n<p>比如在docker compose中启动多台容器，但我现在要获取除了主控制容器外的全部容器ip，我就可以这么写：</p>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\"># 为了回避前端vue页面渲染标记，请自行将 [[ 替换为 {{，反之同理\ndocker network inspect -f \"[[json .Containers]]\" [网段docker network id] | jq '.[] | select(.Name != \"xcontroller\") | .IPv4Address' | grep -Eo '[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}'<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<blockquote>\n<p>使用了jq工具（需要额外安装 <code>apt install jq</code>）用于解析json</p>\n</blockquote>\n<h1 id=\"sed\"><a href=\"#sed\" class=\"headerlink\" title=\"sed\"></a>sed</h1><p>sed命令用于对文件流进行编辑。意思就是说可以编辑文件，但编辑完不会保存到文件。</p>\n<p>如果使用 <code>sed -i</code> 可以直接保存编辑文件内容。</p>\n<p><code>$</code> 表示末尾，如想在末尾添加文本，可以 <code>sed -i &#39;$a [文本]&#39; [文件地址]</code> ，如果在 <code>a</code> 的前面不标明行号，则代表每行后都追加</p>\n<p>行号写 <code>2,5</code> 不是第2行和第5行的意思，是2-5行</p>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">sed '1i 添加的内容' file  #这是在第一行前添加字符串\nsed '$i 添加的内容' file  #这是在最后一行行前添加字符串\nsed '$a添加的内容' file   #这是在最后一行行后添加字符串<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h1><p>AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。</p>\n"}