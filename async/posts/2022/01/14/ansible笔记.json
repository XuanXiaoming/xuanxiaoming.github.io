{"tags":[{"name":"运维","permalink":"https://xuanxiaoming.github.io/tags/%E8%BF%90%E7%BB%B4/","url":"/async/tags/运维.json","count":3}],"categories":[],"url":"/async/posts/2022/01/14/ansible笔记.json","date":1642096892000,"path":{"year":2022,"month":1,"day":14,"name":"ansible笔记"},"title":"Ansible笔记","permalink":"https://xuanxiaoming.github.io/2022/01/14/ansible%E7%AC%94%E8%AE%B0/","content":"<h1 id=\"Ansible笔记\"><a href=\"#Ansible笔记\" class=\"headerlink\" title=\"Ansible笔记\"></a>Ansible笔记</h1><h3 id=\"ansible连接时是使用ssh还是open-ssh\"><a href=\"#ansible连接时是使用ssh还是open-ssh\" class=\"headerlink\" title=\"ansible连接时是使用ssh还是open-ssh\"></a>ansible连接时是使用ssh还是open-ssh</h3><p>很明显是使用ssh，open-ssh只是包装了ssh的一个插件，本质上还是使用ssh</p>\n<h3 id=\"inventory和ansible-cfg的有什么区别，作用是什么\"><a href=\"#inventory和ansible-cfg的有什么区别，作用是什么\" class=\"headerlink\" title=\"inventory和ansible.cfg的有什么区别，作用是什么\"></a>inventory和ansible.cfg的有什么区别，作用是什么</h3><p>inventory中文含义为库存，也叫物品清单。顾名思义是用于填写机器列表的地方，在文件 <code>/etc/ansible/host</code> 中根据语法填入接受控制机管理的机器ip即可</p>\n<p>ansible.cfg为ansible的配置文件。配置文件可以修改很多东西，比如inventory文件指向、默认用户名密码等等，绝大多数情况下仅配置inventory就足够了</p>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">> ansible --version\n\nansible 2.9.6\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\n  executable location = /usr/bin/ansible\n  python version = 3.8.10 (default, Nov 26 2021, 20:14:08) [GCC 9.3.0]\n\n> cat /etc/ansible/ansible.cfg | less\n\n[defaults]\n\n# some basic default values...\n\n#inventory      = /etc/ansible/hosts\n#library        = /usr/share/my_modules/\n#module_utils   = /usr/share/my_module_utils/\n#remote_tmp     = ~/.ansible/tmp\n#local_tmp      = ~/.ansible/tmp\n#plugin_filters_cfg = /etc/ansible/plugin_filters.yml\n#forks          = 5\n#poll_interval  = 15\n#sudo_user      = root\n#ask_sudo_pass = True\n#ask_pass      = True\n#transport      = smart\n#remote_port    = 22\n#module_lang    = C\n#module_set_locale = False\n......<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"ssh配置提示-sshd-config-line-36-Deprecated-option-RSAAuthentication\"><a href=\"#ssh配置提示-sshd-config-line-36-Deprecated-option-RSAAuthentication\" class=\"headerlink\" title=\"ssh配置提示 sshd_config line 36: Deprecated option RSAAuthentication\"></a>ssh配置提示 sshd_config line 36: Deprecated option RSAAuthentication</h3><p>RSAAuthentication （rsa认证）是只支持第1代ssh通讯协议使用的配置项，在CentOS7.4中被废除了，而且前面提到过CentOS7开始预设使用第二代通讯协议，在CentOS7.4中没有找到指定协议版本的配置行，个人猜测是CentOS7.4全面抛弃第1代协议。</p>\n<p>第2代ssh通讯协议的密钥验证选项是<code>#PubkeyAuthentication yes</code></p>\n<p>这个选项默认是注释掉的，并且是默认开启的，因此我们在使用第二代ssh通讯协议时不需要再去纠结 RSAAuthentication 选项了，在CentOS7.4中其强行添加 RSAAuthentication 配置会触发系统对它的废除提示。</p>\n<pre class=\"line-numbers language-log\"><code class=\"language-log\">reprocess config line 38: Deprecated option RSAAuthentication<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"修改ansible配置文件后，不需要重启\"><a href=\"#修改ansible配置文件后，不需要重启\" class=\"headerlink\" title=\"修改ansible配置文件后，不需要重启\"></a>修改ansible配置文件后，不需要重启</h3><p>ansible是一个可执行程序，不是服务。故修改任何参数都将在下一次运行中体现出来，不需要重启，也无方法重启。</p>\n<h3 id=\"后续添加多台机器如何配置ansible\"><a href=\"#后续添加多台机器如何配置ansible\" class=\"headerlink\" title=\"后续添加多台机器如何配置ansible\"></a>后续添加多台机器如何配置ansible</h3><p>使用动态inventory</p>\n"}